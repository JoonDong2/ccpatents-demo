!function($){$.buttons=function(element,options){if(element.btns)return!1;options=$.extend({groupClass:"multibutton",onChange:!1,onClick:!1,single:!0,needFill:!0,nofixed:!1,depend:",",textDepend:", "},options);var $obj=$(element),btns={init:function(){$obj.length&&($obj.addClass(options.groupClass),$("li",$obj).mousedown(this.mousedown),$("li",$obj).mouseup(this.mouseup),$("li",$obj).mouseout(this.mouseout),$("li",$obj).click(this.click),$obj[0].onselectstart=function(){return!1},$obj.attr("rel")&&this.setValue($obj.attr("rel")))},mousedown:function(){$(this).addClass("action")},mouseup:function(){$(this).removeClass("action")},mouseout:function(){$(this).removeClass("action")},click:function(){var actived=$("li.active",$obj).length;return options.single?$(this).hasClass("active")&&!options.needFill?$(this).removeClass("active"):($("li",$obj).removeClass("active"),$(this).addClass("active")):$(this).hasClass("active")?(actived>1||1==actived&&!options.needFill)&&$(this).removeClass("active"):$(this).addClass("active"),options.onChange&&$(this).hasClass("active")&&options.onChange($(this),$(this).attr("rel")),options.onClick&&options.onClick($(this),btns.getValue()),options.nofixed&&$(this).removeClass("active"),!1},getValue:function(text){var text=text||!1,results=[];return $("li.active",$obj).each(function(){results.push(text?$(this).text():$(this).attr("rel"))}),results.join(text?options.textDepend:options.depend)},setValue:function(value,external){var values=(value+="").split(options.depend);$("li",$obj).each(function(){$.inArray($(this).attr("rel"),values)>-1?($(this).addClass("active"),external&&options.onChange&&options.onChange($(this),$(this).attr("rel"))):$(this).removeClass("active")})}};return element.btns=btns,element.options=options,btns.init(),element},$.fn.multiButton=function(options){var options,join;return!!(options=options||{}).hasOwnProperty("join")&&options.join?($.buttons(this,options),this):this.each(function(){$.buttons(this,options)})},$.fn.multiDelete=function(){return this.each(function(){void 0!==this.btns?$("li",$(this)).unbind():console.warn("multiDelete: selector has not been initialized!")}),this},$.fn.getValue=function(text){var text=text||!1;if(void 0!==this.btns)return this.btns.getValue(text);var value="";return this.each(function(){void 0!==this.btns?(newvalue=this.btns.getValue(text),""!=newvalue&&""!=value&&(value+=text?this.options.textDepend:this.options.depend),value+=newvalue):value=null}),null==value&&console.warn("getValue: selector has not been initialized!"),value},$.fn.setValue=function(value){if(void 0!==this.btns)this.btns.setValue(value,!0);else{var did=!1;this.each(function(){void 0!==this.btns&&(this.btns.setValue(value,!0),did=!0)}),did||console.warn("setValue: selector has not been initialized!")}}}(jQuery);